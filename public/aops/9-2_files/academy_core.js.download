function $$(e){return document.getElementById(e)}Academy={},$((function(){$("#header-logout, .logout-link").on("click",Academy.Logout.logout),Academy.fixFooter(),Academy.login.initialize(),Academy.initializePopIn(),Academy.isVirtual=!!Academy.campus&&"virtual"===Academy.campus.id,Academy.campus&&(Academy.campus.isVirtual=Academy.isVirtual),$(".unimitate-btn").click((function(e){$.ajax({url:"/ajax.php",timeout:5e3,type:"post",data:{a:"unimitate"},success:function(){window.location.reload()}})}))})),Academy.clearQuery=function(e){"[object Array]"!==Object.prototype.toString.call(e)&&(e=["utm_source","gtm_list"]);var o=location.href.split("?");if(o.length>1){var t=o[0],n=[];o=o[1].split("&");for(var i=0;i<o.length;i++){var a=o[i].split("=");a.length>1?e.indexOf(a[0])<0&&n.push(o[i]):n.push(o[i])}n=n.join("&"),window.history.replaceState({},document.title,t+"?"+n)}},Academy.getBootstrapData=function(e,o){return Academy.bootstrap_data&&Academy.bootstrap_data.hasOwnProperty(e)?Academy.bootstrap_data[e]:AoPS.bootstrap_data&&AoPS.bootstrap_data.hasOwnProperty(e)?AoPS.bootstrap_data[e]:o},Academy.fixFooter=function(){var e=$(window).height(),o=$("body").hasClass("small-footer");e-=$("#header-wrapper").outerHeight(),e-=$("#top-bar").outerHeight(),e-=o?$("#small-footer-wrapper").outerHeight():$("#main-footer").outerHeight(),$("#main-content").css("min-height",e),o&&$("#small-footer-wrapper").show();var t=document.getElementById("side-column-wrapper");t?$(t).css("min-height",e):$("#main-content").css("padding-bottom","35px"),$("#small-footer-wrapper").css("position","absolute"),$("#header-old,#header-old-ribbon").css("margin-bottom",35),$("body").css("min-height","100vh"),$("body").css("position","relative"),$(t).css("height",$(t).closest(".left-navigation").height())},window.classicAlert=window.alert,window.alert=function(e,o){AoPS.hasOwnProperty("Ui")?(AoPS.Ui.Modal.closeTopModal(),AoPS.Ui.Modal.showAlertQuick(e,o)):window.classicAlert(e)},window.classicConfirm=window.confirm,window.confirm=function(e,o,t){if("function"==typeof o){var n=t;t=o,o=n}AoPS.hasOwnProperty("Ui")?(o&&(o.yesNo||o.yes_no)&&(o.confirm_button_ok="Yes",o.confirm_button_cancel="No"),AoPS.Ui.Modal.showConfirmQuick(e,t,o)):t(confirm(e))},Academy.getSigninURL=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.redirectUrl?e.redirectUrl:window.location.href;return"/signin?requestedPage=".concat(encodeURIComponent(o))},Academy.Logout={logout:function(e){window.location.href="/signout?requestedPage=".concat(encodeURIComponent(window.location.href))},redirect:function(e){window.location.href="/signout?requestedPage=".concat(encodeURIComponent(e))}},Academy.login={initialize:function(){$(".academy-login-button").on("click",Academy.login.display)},display:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};window.location.href=Academy.getSigninURL(e)}},Academy.initializePopIn=function(){var e=$("body"),o=$("#top-bar"),t=$("#main-logo"),n=!1,i=!1,a=!1,r=!1;o.on("mousemove.start_loc",(function(){n=!0})),t.on("mousemove.start_loc",(function(){r=!0})),e.on("mousemove.start_loc",(function(){o.off("mousemove.start_loc"),e.off("mousemove.start_loc"),t.off("mousemove.start_loc"),setTimeout((function(){n=!1,r=!1}),350)})),o.on("mouseenter",(function(){i=!0,setTimeout((function(){!n&&i&&$("#header-popin").animate({opacity:1},150)}),350)})),t.on("mouseenter",(function(){a=!0,setTimeout((function(){!r&&a&&$("#header-popin").animate({opacity:1},150)}),350)})),o.on("mouseleave",(function(){i=!1})),t.on("mouseleave",(function(){a=!1})),$("#header").on("mouseleave",(function(){$("#header-popin").animate({opacity:0},150)}))},Academy.convertSmartQuotes=function(e){return e.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"').replace(/[\u2013\u2014]/g,"-").replace(/[\u2026]/g,"...")},Academy.isInViewport=function(e){var o=e.getBoundingClientRect();return o.top>=0&&o.left>=0&&o.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&o.right<=(window.innerWidth||document.documentElement.clientWidth)},window.handlebars=function(e,o){var t="";if(o||(o={}),e instanceof Element)t=e.innerHTML;else if("undefined"!=typeof jQuery&&e instanceof jQuery)t=e.html();else{if("string"!=typeof e)return!1;if("."===e.substr(0,1)||"#"===e.substr(0,1)){var n=document.querySelector(e);t=null===n?e:n.innerHTML}else t=e}if("undefined"!=typeof Handlebars)return Handlebars.compile(t)(o);for(var i in o){var a=new RegExp("{{"+i+"}}","g");t=t.replace(a,o[i])}return t};
;Academy.AskAcademy={display:function(a){var e="national"===Academy.campus.id,s="lumen"===Academy.campus.id,o=['<div class="aops-modal-body clearfix askaops">','<div class="askaops-categories">',"<h1>Ask AoPS Academy</h1>","<strong>I have a question about:</strong><br>",'<div style="padding-left:10px;padding-top:10px;line-height:2em;">','<label><input type="radio" name="askaops-category" value="general" checked="checked"> General Information</label>','<label><input type="radio" name="askaops-category" value="current"> Current Student</label>',s?"":'<label><input type="radio" name="askaops-category" value="billing"> Billing Information</label>','<label><input type="radio" name="askaops-category" value="technical"> Technical Support</label>','<label><input type="radio" name="askaops-category" value="other"> Other</label>',"</div></div>",'<div class="askaops-form">','<div id="askaops-blurb">Have a general question about ',Academy.campus.name,"? Let us know below.</div>",'<div id="askaops-error" class="error-box"></div>','<input data-hj-suppress="" data-hj-masked="" id="askaops-subject" class="form-control" placeholder="Message Subject">','<input data-hj-suppress="" data-hj-masked="" id="askaops-ordernumber" class="askaops-ordernumber form-control" placeholder="Order number - if known">','<input data-hj-suppress="" data-hj-masked="" id="askaops-course" class="askaops-course form-control" placeholder="Class name and id - if known">','<textarea data-hj-suppress="" data-hj-masked="" id="askaops-message" class="form-control"  style="margin-top:10px;height:100px;" placeholder="How can we help you?"></textarea>','<input data-hj-suppress="" data-hj-masked="" id="askaops-name" style="margin-top:10px" class="form-control" placeholder="Your name">','<input data-hj-suppress="" data-hj-masked="" id="askaops-email" style="margin-top:10px" class="form-control" placeholder="Your email address">','<input data-hj-suppress="" data-hj-masked="" id="askaops-student-name" style="margin-top:10px" class="form-control" placeholder="Student name">','<input data-hj-suppress="" data-hj-masked="" id="askaops-username" class="askaops-username form-control" placeholder="AoPS Username (optional)">','<table style="margin-top:10px"><tr>',s?"":'<td width="25" valign="top"><input id="ask-maillist" type="checkbox" name="maillist"></td>','<td><label for="ask-maillist">',s?"":["(Optional) Please add my email to AoPS Academy's mailing lists to be notified about ",e?"new AoPS Academy locations and other":"upcoming classes, new Academy offerings, and"," Academy events. I consent to joining the mailing lists and am over 16 years old."].join(""),"</label></td></tr></table>",'<div class="text-right">','<input id="askaops-submit" style="margin-top:10px" type="submit" class="btn-lg btn btn-primary" value="Submit your message">',"</div>",'<p class="text-right">Your information will be used in accordance with our <a class="a" href="/legal/privacy" target="_blank">Privacy&nbsp;Policy</a>.</p>',"</div></div>"].join("");AoPS.Ui.Modal.showPlain({body:o,width:"75%",onClose:this.onClose,scrollable:!1,frame_class:"askaops-modal",height:"",max_height:""}),$(".askaops-modal").parent(".aops-modal-wrapper").addClass("askaops-modal-wrapper"),void 0!==a&&setTimeout((function(){"current"===a?($(".askaops input[name='askaops-category'][value=current]").prop("checked",!0),Academy.AskAcademy.onChange()):"technical"===a?($(".askaops input[name='askaops-category'][value=technical]").prop("checked",!0),Academy.AskAcademy.onChange()):"billing"===a&&($(".askaops input[name='askaops-category'][value=billing]").prop("checked",!0),Academy.AskAcademy.onChange())}),1),this.onShow()},onChange:function(a){var e=$(".askaops input[name='askaops-category']:checked").val(),s=["Have a general question about "+Academy.campus.name+"?","Let us know below."].join(" "),o=["Have a question about a current enrollment? Need to send us a message about your child? ","Please include either your student's name or AoPS username below along with your message. "].join(" "),t=["Have a question about billing? Let us know below."].join(" ");switch($("#askaops-username").hide(),$("#askaops-ordernumber").hide(),$("#askaops-course").hide(),$("#askaops-student-name").hide(),e){case"general":$("#askaops-blurb").html(s);break;case"current":$("#askaops-student-name").show(),$("#askaops-blurb").html(o);break;case"billing":$("#askaops-blurb").html(t);break;case"technical":$("#askaops-student-name").show(),$("#askaops-username").show(),$("#askaops-blurb").html(["Please include a detailed description of the error or issue you ","are experiencing."]);break;case"other":$("#askaops-blurb").html("")}},onSubmit:function(){$("#askaops-submit").off("click",Academy.AskAcademy.onSubmit);var a="";window.localStorage&&(a=window.localStorage.getItem("cdid"));var e=$(".askaops input[name='askaops-category']:checked").val(),s=$("#ask-maillist")[0].checked;$.post("/m/contact/ajax.php",{action:"email",type:e,username:$("#askaops-username").val(),email:$("#askaops-email").val(),name:$("#askaops-name").val(),student_name:$("#askaops-student-name").val(),subject:$("#askaops-subject").val(),message:$("#askaops-message").val(),course:$("#askaops-course").val(),maillist:s,url:window.location.href,cdid:a},(function(a){if(a.error_msg)$("#askaops-error").html(a.error_msg).show(),$("#askaops-submit").on("click",Academy.AskAcademy.onSubmit);else if(AoPS.Ui.Modal.closeTopModal(),Academy.AskAcademy.submitEventToAnalytics(e,s),a.response.thanks)AoPS.Ui.Modal.showAlertQuick(a.response.thanks);else{AoPS.Ui.Modal.showAlertQuick(["<p>Thank you. We have recieved your comment or question.</p>","<p>One of our staff members will respond to you within two business days.</p>"])}}))},onShow:function(){$(".askaops input[name='askaops-category']").on("change",this.onChange),this.onChange(),$("#askaops-submit").on("click",this.onSubmit),$("#askaops-subject").focus()},onClose:function(){$(".askaops input[name='askaops-category']").off("change",this.onChange),$("#askaops-submit").off("click",this.onSubmit)},submitEventToAnalytics:function(a,e){var s="not_registered";if(AoPS.session.logged_in){var o=AoPS.session.role.split(",");s=o.indexOf("officestaff")>=0||o.indexOf("admin")>=0?"staff":o.indexOf("parent")>=0?"parent":"registered_user"}window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"ask-academy",campus:Academy.campus.id,contact_type:a,joined_maillist:e,logged_in:AoPS.session.logged_in,role:s})}};
;//# sourceMappingURL=academy_core.js.map